{% extends 'base.html.twig' %}

{% block title %}Hello WebsocketController!{% endblock %}

{% block body %}
<style>
    body {
        font-family: arial;
    }

    .form-group {
        margin-bottom: 10px;
    }

    input {
        border: solid lightgrey 1px;
        padding: 8px;
    }

    label {
        display: inline-block;
        min-width: 150px;
    }

    #chat {
        height: 400px;
        width: 600px;
        border: solid lightgrey 1px;
        overflow: auto;
        margin-bottom: 20px;
    }

    button {
        padding: 6px 12px;
    }

    .message {
        padding: 10px 5px;
        margin-bottom: 10px;
        border-bottom: solid lightgrey 1px;
    }
</style>

    <div id="chat">

    </div>
{#    <div class="form-group">#}
{#        <label for="name">Name:</label>#}
{#        <input type="text" id="name">#}
{#    </div>#}
{#    <div class="form-group">#}
{#        <label for="message">Message:</label>#}
{#        <input type="text" id="message">#}
{#    </div>#}
{#    <button type="button" id="sendBtn">Send</button>#}

    {% block javascripts %}
        {{ parent() }}

        {{ encore_entry_script_tags('chat') }}
    {% endblock %}

    <script>
        // const socket = new WebSocket("ws://localhost:3001");
        //
        // socket.addEventListener("open", () => console.log("Connected"));
        //
        // document.getElementById("sendBtn").addEventListener("click", function (){
        //     const msg = {
        //         name: document.getElementById("name").value,
        //         message: document.getElementById("message").value
        //     };
        //     makeMsg(msg, document.getElementById("chat"));
        //     socket.send(JSON.stringify(msg));
        // })
        //
        // socket.addEventListener("message", function (e){
        //     const chatContainer = document.getElementById("chat");
        //     const msg = JSON.parse(e.data);
        //     makeMsg(msg, chatContainer);
        // })
        //
        // function makeMsg(msg, container){
        //     const msgDiv = document.createElement('div');
        //     msgDiv.classList.add("message");
        //     msgDiv.innerText = `${msg.name} : ${msg.message}`
        //     container.appendChild(msgDiv);
        // }

    </script>

{% endblock %}
